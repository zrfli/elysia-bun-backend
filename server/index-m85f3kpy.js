// @bun
import{a as _Q,b as q1,d as D1,e as $Q}from"./index-m7fn6zwr.js";var A1=q1((oY,X0)=>{function XQ(Q){J.debug=J,J.default=J,J.coerce=j,J.disable=Z,J.enable=$,J.enabled=V,J.humanize=$Q(),J.destroy=F,Object.keys(Q).forEach((q)=>{J[q]=Q[q]}),J.names=[],J.skips=[],J.formatters={};function Y(q){let X=0;for(let M=0;M<q.length;M++)X=(X<<5)-X+q.charCodeAt(M),X|=0;return J.colors[Math.abs(X)%J.colors.length]}J.selectColor=Y;function J(q){let X,M=null,C,A;function P(...R){if(!P.enabled)return;let D=P,z=Number(new Date),L=z-(X||z);if(D.diff=L,D.prev=X,D.curr=z,X=z,R[0]=J.coerce(R[0]),typeof R[0]!=="string")R.unshift("%O");let v=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(h,Y1)=>{if(h==="%%")return"%";v++;let f=J.formatters[Y1];if(typeof f==="function"){let m=R[v];h=f.call(D,m),R.splice(v,1),v--}return h}),J.formatArgs.call(D,R),(D.log||J.log).apply(D,R)}if(P.namespace=q,P.useColors=J.useColors(),P.color=J.selectColor(q),P.extend=K,P.destroy=J.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(M!==null)return M;if(C!==J.namespaces)C=J.namespaces,A=J.enabled(q);return A},set:(R)=>{M=R}}),typeof J.init==="function")J.init(P);return P}function K(q,X){let M=J(this.namespace+(typeof X==="undefined"?":":X)+q);return M.log=this.log,M}function $(q){J.save(q),J.namespaces=q,J.names=[],J.skips=[];let X=(typeof q==="string"?q:"").trim().replace(" ",",").split(",").filter(Boolean);for(let M of X)if(M[0]==="-")J.skips.push(M.slice(1));else J.names.push(M)}function W(q,X){let M=0,C=0,A=-1,P=0;while(M<q.length)if(C<X.length&&(X[C]===q[M]||X[C]==="*"))if(X[C]==="*")A=C,P=M,C++;else M++,C++;else if(A!==-1)C=A+1,P++,M=P;else return!1;while(C<X.length&&X[C]==="*")C++;return C===X.length}function Z(){let q=[...J.names,...J.skips.map((X)=>"-"+X)].join(",");return J.enable(""),q}function V(q){for(let X of J.skips)if(W(q,X))return!1;for(let X of J.names)if(W(q,X))return!0;return!1}function j(q){if(q instanceof Error)return q.stack||q.message;return q}function F(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return J.enable(J.load()),J}X0.exports=XQ});var q0=q1((W0,V1)=>{W0.formatArgs=qQ;W0.save=MQ;W0.load=VQ;W0.useColors=WQ;W0.storage=GQ();W0.destroy=(()=>{let Q=!1;return()=>{if(!Q)Q=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();W0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function WQ(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let Q;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&(Q=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(Q[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function qQ(Q){if(Q[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+Q[0]+(this.useColors?"%c ":" ")+"+"+V1.exports.humanize(this.diff),!this.useColors)return;let Y="color: "+this.color;Q.splice(1,0,Y,"color: inherit");let J=0,K=0;Q[0].replace(/%[a-zA-Z%]/g,($)=>{if($==="%%")return;if(J++,$==="%c")K=J}),Q.splice(K,0,Y)}W0.log=console.debug||console.log||(()=>{});function MQ(Q){try{if(Q)W0.storage.setItem("debug",Q);else W0.storage.removeItem("debug")}catch(Y){}}function VQ(){let Q;try{Q=W0.storage.getItem("debug")}catch(Y){}if(!Q&&typeof process!=="undefined"&&"env"in process)Q=process.env.DEBUG;return Q}function GQ(){try{return localStorage}catch(Q){}}V1.exports=A1()(W0);var{formatters:ZQ}=V1.exports;ZQ.j=function(Q){try{return JSON.stringify(Q)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}});var Z0=q1((V0,Z1)=>{var RQ=D1("tty"),G1=D1("util");V0.init=AQ;V0.log=UQ;V0.formatArgs=BQ;V0.save=LQ;V0.load=IQ;V0.useColors=OQ;V0.destroy=G1.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");V0.colors=[6,2,3,4,5,1];try{let Q=(()=>{throw new Error("Cannot require module "+"supports-color");})();if(Q&&(Q.stderr||Q).level>=2)V0.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(Q){}V0.inspectOpts=Object.keys(process.env).filter((Q)=>{return/^debug_/i.test(Q)}).reduce((Q,Y)=>{let J=Y.substring(6).toLowerCase().replace(/_([a-z])/g,($,W)=>{return W.toUpperCase()}),K=process.env[Y];if(/^(yes|on|true|enabled)$/i.test(K))K=!0;else if(/^(no|off|false|disabled)$/i.test(K))K=!1;else if(K==="null")K=null;else K=Number(K);return Q[J]=K,Q},{});function OQ(){return"colors"in V0.inspectOpts?Boolean(V0.inspectOpts.colors):RQ.isatty(process.stderr.fd)}function BQ(Q){let{namespace:Y,useColors:J}=this;if(J){let K=this.color,$="\x1B[3"+(K<8?K:"8;5;"+K),W=`  ${$};1m${Y} \x1B[0m`;Q[0]=W+Q[0].split(`
`).join(`
`+W),Q.push($+"m+"+Z1.exports.humanize(this.diff)+"\x1B[0m")}else Q[0]=EQ()+Y+" "+Q[0]}function EQ(){if(V0.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function UQ(...Q){return process.stderr.write(G1.formatWithOptions(V0.inspectOpts,...Q)+`
`)}function LQ(Q){if(Q)process.env.DEBUG=Q;else delete process.env.DEBUG}function IQ(){return process.env.DEBUG}function AQ(Q){Q.inspectOpts={};let Y=Object.keys(V0.inspectOpts);for(let J=0;J<Y.length;J++)Q.inspectOpts[Y[J]]=V0.inspectOpts[Y[J]]}Z1.exports=A1()(V0);var{formatters:M0}=Z1.exports;M0.o=function(Q){return this.inspectOpts.colors=this.useColors,G1.inspect(Q,this.inspectOpts).split(`
`).map((Y)=>Y.trim()).join(" ")};M0.O=function(Q){return this.inspectOpts.colors=this.useColors,G1.inspect(Q,this.inspectOpts)}});var j0=q1((fY,w1)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)w1.exports=q0();else w1.exports=Z0()});import{ReadableStream as oQ}from"stream/web";import{pipeline as L0,PassThrough as dQ,Readable as nQ}from"stream";import{stat as v0}from"fs/promises";class N extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}}class p extends Error{constructor(Q="The operation was aborted"){super(Q);this.name="AbortError"}}class F1{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((Q,Y)=>{this.reject=Y,this.resolve=Q})}}class y{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek(Q,Y=!1){let J=await this.read(Q,Y);return this.peekQueue.push(Q.subarray(0,J)),J}async read(Q,Y=!1){if(Q.length===0)return 0;let J=this.readFromPeekBuffer(Q);if(!this.endOfStream)J+=await this.readRemainderFromStream(Q.subarray(J),Y);if(J===0)throw new N;return J}readFromPeekBuffer(Q){let Y=Q.length,J=0;while(this.peekQueue.length>0&&Y>0){let K=this.peekQueue.pop();if(!K)throw new Error("peekData should be defined");let $=Math.min(K.length,Y);if(Q.set(K.subarray(0,$),J),J+=$,Y-=$,$<K.length)this.peekQueue.push(K.subarray($))}return J}async readRemainderFromStream(Q,Y){let J=0;while(J<Q.length&&!this.endOfStream){if(this.interrupted)throw new p;let K=await this.readFromStream(Q.subarray(J),Y);if(K===0)break;J+=K}if(!Y&&J<Q.length)throw new N;return J}}class K1 extends y{constructor(Q){super();if(this.s=Q,this.deferred=null,!Q.read||!Q.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>{if(this.endOfStream=!0,this.deferred)this.deferred.resolve(0)}),this.s.once("error",(Y)=>this.reject(Y)),this.s.once("close",()=>this.abort())}async readFromStream(Q,Y){if(Q.length===0)return 0;let J=this.s.read(Q.length);if(J)return Q.set(J),J.length;let K={buffer:Q,mayBeLess:Y,deferred:new F1};return this.deferred=K.deferred,this.s.once("readable",()=>{this.readDeferred(K)}),K.deferred.promise}readDeferred(Q){let Y=this.s.read(Q.buffer.length);if(Y)Q.buffer.set(Y),Q.deferred.resolve(Y.length),this.deferred=null;else this.s.once("readable",()=>{this.readDeferred(Q)})}reject(Q){if(this.interrupted=!0,this.deferred)this.deferred.reject(Q),this.deferred=null}async abort(){this.reject(new p)}async close(){return this.abort()}}class R1 extends y{constructor(Q){super();this.reader=Q}async abort(){return this.close()}async close(){this.reader.releaseLock()}}class $1 extends R1{async readFromStream(Q,Y){if(Q.length===0)return 0;let J=await this.reader.read(new Uint8Array(Q.length),{min:Y?void 0:Q.length});if(J.done)this.endOfStream=J.done;if(J.value)return Q.set(J.value),J.value.length;return 0}}class s extends y{constructor(Q){super();this.reader=Q,this.buffer=null}writeChunk(Q,Y){let J=Math.min(Y.length,Q.length);if(Q.set(Y.subarray(0,J)),J<Y.length)this.buffer=Y.subarray(J);else this.buffer=null;return J}async readFromStream(Q,Y){if(Q.length===0)return 0;let J=0;if(this.buffer)J+=this.writeChunk(Q,this.buffer);while(J<Q.length&&!this.endOfStream){let K=await this.reader.read();if(K.done){this.endOfStream=!0;break}if(K.value)J+=this.writeChunk(Q.subarray(J),K.value)}if(J===0&&this.endOfStream)throw new N;return J}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}function O1(Q){try{let Y=Q.getReader({mode:"byob"});if(Y instanceof ReadableStreamDefaultReader)return new s(Y);return new $1(Y)}catch(Y){if(Y instanceof TypeError)return new s(Q.getReader());throw Y}}class k{constructor(Q){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=Q?.onClose,Q?.abortSignal)Q.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(Q,Y=this.position){let J=new Uint8Array(Q.len);if(await this.readBuffer(J,{position:Y})<Q.len)throw new N;return Q.get(J,0)}async peekToken(Q,Y=this.position){let J=new Uint8Array(Q.len);if(await this.peekBuffer(J,{position:Y})<Q.len)throw new N;return Q.get(J,0)}async readNumber(Q){if(await this.readBuffer(this.numBuffer,{length:Q.len})<Q.len)throw new N;return Q.get(this.numBuffer,0)}async peekNumber(Q){if(await this.peekBuffer(this.numBuffer,{length:Q.len})<Q.len)throw new N;return Q.get(this.numBuffer,0)}async ignore(Q){if(this.fileInfo.size!==void 0){let Y=this.fileInfo.size-this.position;if(Q>Y)return this.position+=Y,Y}return this.position+=Q,Q}async close(){await this.abort(),await this.onClose?.()}normalizeOptions(Q,Y){if(!this.supportsRandomAccess()&&Y&&Y.position!==void 0&&Y.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:Q.length,position:this.position},...Y}}abort(){return Promise.resolve()}}var T0=256000;class X1 extends k{constructor(Q,Y){super(Y);this.streamReader=Q,this.fileInfo=Y?.fileInfo??{}}async readBuffer(Q,Y){let J=this.normalizeOptions(Q,Y),K=J.position-this.position;if(K>0)return await this.ignore(K),this.readBuffer(Q,Y);if(K<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(J.length===0)return 0;let $=await this.streamReader.read(Q.subarray(0,J.length),J.mayBeLess);if(this.position+=$,(!Y||!Y.mayBeLess)&&$<J.length)throw new N;return $}async peekBuffer(Q,Y){let J=this.normalizeOptions(Q,Y),K=0;if(J.position){let $=J.position-this.position;if($>0){let W=new Uint8Array(J.length+$);return K=await this.peekBuffer(W,{mayBeLess:J.mayBeLess}),Q.set(W.subarray($)),K-$}if($<0)throw new Error("Cannot peek from a negative offset in a stream")}if(J.length>0){try{K=await this.streamReader.peek(Q.subarray(0,J.length),J.mayBeLess)}catch($){if(Y?.mayBeLess&&$ instanceof N)return 0;throw $}if(!J.mayBeLess&&K<J.length)throw new N}return K}async ignore(Q){let Y=Math.min(T0,Q),J=new Uint8Array(Y),K=0;while(K<Q){let $=Q-K,W=await this.readBuffer(J,{length:Math.min(Y,$)});if(W<0)return W;K+=W}return K}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}class B1 extends k{constructor(Q,Y){super(Y);this.uint8Array=Q,this.fileInfo={...Y?.fileInfo??{},...{size:Q.length}}}async readBuffer(Q,Y){if(Y?.position)this.position=Y.position;let J=await this.peekBuffer(Q,Y);return this.position+=J,J}async peekBuffer(Q,Y){let J=this.normalizeOptions(Q,Y),K=Math.min(this.uint8Array.length-J.position,J.length);if(!J.mayBeLess&&K<J.length)throw new N;return Q.set(this.uint8Array.subarray(J.position,J.position+K)),K}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(Q){this.position=Q}}function l1(Q,Y){let J=new K1(Q),K=Y??{},$=K.onClose;return K.onClose=async()=>{if(await J.close(),$)return $()},new X1(J,K)}function W1(Q,Y){let J=O1(Q),K=Y??{},$=K.onClose;return K.onClose=async()=>{if(await J.close(),$)return $()},new X1(J,K)}function o1(Q,Y){return new B1(Q,Y)}import{open as z0}from"fs/promises";class a extends k{static async fromFile(Q){let Y=await z0(Q,"r"),J=await Y.stat();return new a(Y,{fileInfo:{path:Q,size:J.size}})}constructor(Q,Y){super(Y);this.fileHandle=Q,this.fileInfo=Y.fileInfo}async readBuffer(Q,Y){let J=this.normalizeOptions(Q,Y);if(this.position=J.position,J.length===0)return 0;let K=await this.fileHandle.read(Q,0,J.length,J.position);if(this.position+=K.bytesRead,K.bytesRead<J.length&&(!Y||!Y.mayBeLess))throw new N;return K.bytesRead}async peekBuffer(Q,Y){let J=this.normalizeOptions(Q,Y),K=await this.fileHandle.read(Q,0,J.length,J.position);if(!J.mayBeLess&&K.bytesRead<J.length)throw new N;return K.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition(Q){this.position=Q}supportsRandomAccess(){return!0}}async function d1(Q,Y){let J=l1(Q,Y);if(Q.path){let K=await v0(Q.path);J.fileInfo.path=Q.path,J.fileInfo.size=K.size}return J}var n1=a.fromFile;/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function O(Q){return new DataView(Q.buffer,Q.byteOffset)}var f1={len:1,get(Q,Y){return O(Q).getUint8(Y)},put(Q,Y,J){return O(Q).setUint8(Y,J),Y+1}},H={len:2,get(Q,Y){return O(Q).getUint16(Y,!0)},put(Q,Y,J){return O(Q).setUint16(Y,J,!0),Y+2}},o={len:2,get(Q,Y){return O(Q).getUint16(Y)},put(Q,Y,J){return O(Q).setUint16(Y,J),Y+2}};var x={len:4,get(Q,Y){return O(Q).getUint32(Y,!0)},put(Q,Y,J){return O(Q).setUint32(Y,J,!0),Y+4}},i1={len:4,get(Q,Y){return O(Q).getUint32(Y)},put(Q,Y,J){return O(Q).setUint32(Y,J),Y+4}};var s1={len:4,get(Q,Y){return O(Q).getInt32(Y)},put(Q,Y,J){return O(Q).setInt32(Y,J),Y+4}};var a1={len:8,get(Q,Y){return O(Q).getBigUint64(Y,!0)},put(Q,Y,J){return O(Q).setBigUint64(Y,J,!0),Y+8}};class B{constructor(Q,Y){this.len=Q,this.encoding=Y,this.textDecoder=new TextDecoder(Y)}get(Q,Y){return this.textDecoder.decode(Q.subarray(Y,Y+this.len))}}import{createRequire as m0}from"module";var p0=m0("/"),y0;try{y0=p0("worker_threads").Worker}catch(Q){}var U=Uint8Array,d=Uint16Array,u0=Int32Array,r1=new U([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),t1=new U([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c0=new U([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e1=function(Q,Y){var J=new d(31);for(var K=0;K<31;++K)J[K]=Y+=1<<Q[K-1];var $=new u0(J[30]);for(var K=1;K<30;++K)for(var W=J[K];W<J[K+1];++W)$[W]=W-J[K]<<5|K;return{b:J,r:$}},Q0=e1(r1,2),Y0=Q0.b,b0=Q0.r;Y0[28]=258,b0[258]=28;var J0=e1(t1,0),l0=J0.b,bY=J0.r,L1=new d(32768);for(G=0;G<32768;++G)S=(G&43690)>>1|(G&21845)<<1,S=(S&52428)>>2|(S&13107)<<2,S=(S&61680)>>4|(S&3855)<<4,L1[G]=((S&65280)>>8|(S&255)<<8)>>1;var S,G,r=function(Q,Y,J){var K=Q.length,$=0,W=new d(Y);for(;$<K;++$)if(Q[$])++W[Q[$]-1];var Z=new d(Y);for($=1;$<Y;++$)Z[$]=Z[$-1]+W[$-1]<<1;var V;if(J){V=new d(1<<Y);var j=15-Y;for($=0;$<K;++$)if(Q[$]){var F=$<<4|Q[$],q=Y-Q[$],X=Z[Q[$]-1]++<<q;for(var M=X|(1<<q)-1;X<=M;++X)V[L1[X]>>j]=F}}else{V=new d(K);for($=0;$<K;++$)if(Q[$])V[$]=L1[Z[Q[$]-1]++]>>15-Q[$]}return V},t=new U(288);for(G=0;G<144;++G)t[G]=8;var G;for(G=144;G<256;++G)t[G]=9;var G;for(G=256;G<280;++G)t[G]=7;var G;for(G=280;G<288;++G)t[G]=8;var G,K0=new U(32);for(G=0;G<32;++G)K0[G]=5;var G;var o0=r(t,9,1);var d0=r(K0,5,1),E1=function(Q){var Y=Q[0];for(var J=1;J<Q.length;++J)if(Q[J]>Y)Y=Q[J];return Y},w=function(Q,Y,J){var K=Y/8|0;return(Q[K]|Q[K+1]<<8)>>(Y&7)&J},U1=function(Q,Y){var J=Y/8|0;return(Q[J]|Q[J+1]<<8|Q[J+2]<<16)>>(Y&7)},n0=function(Q){return(Q+7)/8|0},f0=function(Q,Y,J){if(Y==null||Y<0)Y=0;if(J==null||J>Q.length)J=Q.length;return new U(Q.subarray(Y,J))};var i0=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(Q,Y,J){var K=new Error(Y||i0[Q]);if(K.code=Q,Error.captureStackTrace)Error.captureStackTrace(K,E);if(!J)throw K;return K},I1=function(Q,Y,J,K){var $=Q.length,W=K?K.length:0;if(!$||Y.f&&!Y.l)return J||new U(0);var Z=!J,V=Z||Y.i!=2,j=Y.i;if(Z)J=new U($*3);var F=function(u1){var c1=J.length;if(u1>c1){var b1=new U(Math.max(c1*2,u1));b1.set(J),J=b1}},q=Y.f||0,X=Y.p||0,M=Y.b||0,C=Y.l,A=Y.d,P=Y.m,R=Y.n,D=$*8;do{if(!C){q=w(Q,X,1);var z=w(Q,X+1,3);if(X+=3,!z){var L=n0(X)+4,v=Q[L-4]|Q[L-3]<<8,Q1=L+v;if(Q1>$){if(j)E(0);break}if(V)F(M+v);J.set(Q.subarray(L,Q1),M),Y.b=M+=v,Y.p=X=Q1*8,Y.f=q;continue}else if(z==1)C=o0,A=d0,P=9,R=5;else if(z==2){var h=w(Q,X,31)+257,Y1=w(Q,X+10,15)+4,f=h+w(Q,X+5,31)+1;X+=14;var m=new U(f),H1=new U(19);for(var I=0;I<Y1;++I)H1[c0[I]]=w(Q,X+I*3,7);X+=Y1*3;var _1=E1(H1),I0=(1<<_1)-1,A0=r(H1,_1,1);for(var I=0;I<f;){var k1=A0[w(Q,X,I0)];X+=k1&15;var L=k1>>4;if(L<16)m[I++]=L;else{var b=0,J1=0;if(L==16)J1=3+w(Q,X,3),X+=2,b=m[I-1];else if(L==17)J1=3+w(Q,X,7),X+=3;else if(L==18)J1=11+w(Q,X,127),X+=7;while(J1--)m[I++]=b}}var h1=m.subarray(0,h),_=m.subarray(h);P=E1(h1),R=E1(_),C=r(h1,P,1),A=r(_,R,1)}else E(1);if(X>D){if(j)E(0);break}}if(V)F(M+131072);var D0=(1<<P)-1,w0=(1<<R)-1,C1=X;for(;;C1=X){var b=C[U1(Q,X)&D0],l=b>>4;if(X+=b&15,X>D){if(j)E(0);break}if(!b)E(2);if(l<256)J[M++]=l;else if(l==256){C1=X,C=null;break}else{var m1=l-254;if(l>264){var I=l-257,i=r1[I];m1=w(Q,X,(1<<i)-1)+Y0[I],X+=i}var x1=A[U1(Q,X)&w0],P1=x1>>4;if(!x1)E(3);X+=x1&15;var _=l0[P1];if(P1>3){var i=t1[P1];_+=U1(Q,X)&(1<<i)-1,X+=i}if(X>D){if(j)E(0);break}if(V)F(M+131072);var p1=M+m1;if(M<_){var y1=W-_,S0=Math.min(_,p1);if(y1+M<0)E(3);for(;M<S0;++M)J[M]=K[y1+M]}for(;M<p1;++M)J[M]=J[M-_]}}if(Y.l=C,Y.p=C1,Y.b=M,Y.f=q,C)q=1,Y.m=P,Y.d=A,Y.n=R}while(!q);return M!=J.length&&Z?f0(J,0,M):J.subarray(0,M)};var s0=new U(0);var a0=function(Q){if(Q[0]!=31||Q[1]!=139||Q[2]!=8)E(6,"invalid gzip data");var Y=Q[3],J=10;if(Y&4)J+=(Q[10]|Q[11]<<8)+2;for(var K=(Y>>3&1)+(Y>>4&1);K>0;K-=!Q[J++]);return J+(Y&2)},r0=function(Q){var Y=Q.length;return(Q[Y-4]|Q[Y-3]<<8|Q[Y-2]<<16|Q[Y-1]<<24)>>>0};var t0=function(Q,Y){if((Q[0]&15)!=8||Q[0]>>4>7||(Q[0]<<8|Q[1])%31)E(6,"invalid zlib data");if((Q[1]>>5&1)==+!Y)E(6,"invalid zlib data: "+(Q[1]&32?"need":"unexpected")+" dictionary");return(Q[1]>>3&4)+2};function e0(Q,Y){return I1(Q,{i:2},Y&&Y.out,Y&&Y.dictionary)}function QQ(Q,Y){var J=a0(Q);if(J+8>Q.length)E(6,"invalid gzip data");return I1(Q.subarray(J,-8),{i:2},Y&&Y.out||new U(r0(Q)),Y&&Y.dictionary)}function YQ(Q,Y){return I1(Q.subarray(t0(Q,Y&&Y.dictionary),-4),{i:2},Y&&Y.out,Y&&Y.dictionary)}function $0(Q,Y){return Q[0]==31&&Q[1]==139&&Q[2]==8?QQ(Q,Y):(Q[0]&15)!=8||Q[0]>>4>7||(Q[0]<<8|Q[1])%31?e0(Q,Y):YQ(Q,Y)}var JQ=typeof TextDecoder!="undefined"&&new TextDecoder,KQ=0;try{JQ.decode(s0,{stream:!0}),KQ=1}catch(Q){}var x0=_Q(j0(),1);var c={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},S1={get(Q){let Y=H.get(Q,6);return{signature:x.get(Q,0),compressedSize:x.get(Q,8),uncompressedSize:x.get(Q,12)}},len:16},N0={get(Q){let Y=H.get(Q,6);return{signature:x.get(Q,0),minVersion:H.get(Q,4),dataDescriptor:!!(Y&8),compressedMethod:H.get(Q,8),compressedSize:x.get(Q,18),uncompressedSize:x.get(Q,22),filenameLength:H.get(Q,26),extraFieldLength:H.get(Q,28),filename:null}},len:30},H0={get(Q){return{signature:x.get(Q,0),nrOfThisDisk:H.get(Q,4),nrOfThisDiskWithTheStart:H.get(Q,6),nrOfEntriesOnThisDisk:H.get(Q,8),nrOfEntriesOfSize:H.get(Q,10),sizeOfCd:x.get(Q,12),offsetOfStartOfCd:x.get(Q,16),zipFileCommentLength:H.get(Q,20)}},len:22},C0={get(Q){let Y=H.get(Q,8);return{signature:x.get(Q,0),minVersion:H.get(Q,6),dataDescriptor:!!(Y&8),compressedMethod:H.get(Q,10),compressedSize:x.get(Q,20),uncompressedSize:x.get(Q,24),filenameLength:H.get(Q,28),extraFieldLength:H.get(Q,30),fileCommentLength:H.get(Q,32),relativeOffsetOfLocalHeader:x.get(Q,42),filename:null}},len:46};function P0(Q){let Y=new Uint8Array(x.len);return x.put(Y,0,Q),Y}var T=x0.default("tokenizer:inflate"),T1=262144,kQ=P0(c.DataDescriptor),j1=P0(c.EndOfCentralDirectory);class g1{constructor(Q){this.tokenizer=Q,this.syncBuffer=new Uint8Array(T1)}async isZip(){return await this.peekSignature()===c.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(x)}async findEndOfCentralDirectoryLocator(){let Q=this.tokenizer,Y=Math.min(16384,Q.fileInfo.size),J=this.syncBuffer.subarray(0,Y);await this.tokenizer.readBuffer(J,{position:Q.fileInfo.size-Y});for(let K=J.length-4;K>=0;K--)if(J[K]===j1[0]&&J[K+1]===j1[1]&&J[K+2]===j1[2]&&J[K+3]===j1[3])return Q.fileInfo.size-Y+K;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){T("Cannot reading central-directory without random-read support");return}T("Reading central-directory...");let Q=this.tokenizer.position,Y=await this.findEndOfCentralDirectoryLocator();if(Y>0){T("Central-directory 32-bit signature found");let J=await this.tokenizer.readToken(H0,Y),K=[];this.tokenizer.setPosition(J.offsetOfStartOfCd);for(let $=0;$<J.nrOfEntriesOfSize;++$){let W=await this.tokenizer.readToken(C0);if(W.signature!==c.CentralFileHeader)throw new Error("Expected Central-File-Header signature");W.filename=await this.tokenizer.readToken(new B(W.filenameLength,"utf-8")),await this.tokenizer.ignore(W.extraFieldLength),await this.tokenizer.ignore(W.fileCommentLength),K.push(W),T(`Add central-directory file-entry: n=${$+1}/${K.length}: filename=${K[$].filename}`)}return this.tokenizer.setPosition(Q),K}this.tokenizer.setPosition(Q)}async unzip(Q){let Y=await this.readCentralDirectory();if(Y)return this.iterateOverCentralDirectory(Y,Q);let J=!1;do{let K=await this.readLocalFileHeader();if(!K)break;let $=Q(K);J=!!$.stop;let W=void 0;if(await this.tokenizer.ignore(K.extraFieldLength),K.dataDescriptor&&K.compressedSize===0){let Z=[],V=T1;T("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let j=-1;while(j<0&&V===T1){V=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),j=hQ(this.syncBuffer.subarray(0,V),kQ);let F=j>=0?j:V;if($.handler){let q=new Uint8Array(F);await this.tokenizer.readBuffer(q),Z.push(q)}else await this.tokenizer.ignore(F)}if(T(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),$.handler)await this.inflate(K,mQ(Z),$.handler)}else if($.handler)T(`Reading compressed-file-data: ${K.compressedSize} bytes`),W=new Uint8Array(K.compressedSize),await this.tokenizer.readBuffer(W),await this.inflate(K,W,$.handler);else T(`Ignoring compressed-file-data: ${K.compressedSize} bytes`),await this.tokenizer.ignore(K.compressedSize);if(T(`Reading data-descriptor at pos=${this.tokenizer.position}`),K.dataDescriptor){if((await this.tokenizer.readToken(S1)).signature!==134695760)throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-S1.len}`)}}while(!J)}async iterateOverCentralDirectory(Q,Y){for(let J of Q){let K=Y(J);if(K.handler){this.tokenizer.setPosition(J.relativeOffsetOfLocalHeader);let $=await this.readLocalFileHeader();if($){await this.tokenizer.ignore($.extraFieldLength);let W=new Uint8Array(J.compressedSize);await this.tokenizer.readBuffer(W),await this.inflate($,W,K.handler)}}if(K.stop)break}}inflate(Q,Y,J){if(Q.compressedMethod===0)return J(Y);T(`Decompress filename=${Q.filename}, compressed-size=${Y.length}`);let K=$0(Y);return J(K)}async readLocalFileHeader(){let Q=await this.tokenizer.peekToken(x);if(Q===c.LocalFileHeader){let Y=await this.tokenizer.readToken(N0);return Y.filename=await this.tokenizer.readToken(new B(Y.filenameLength,"utf-8")),Y}if(Q===c.CentralFileHeader)return!1;if(Q===3759263696)throw new Error("Encrypted ZIP");throw new Error("Unexpected signature")}}function hQ(Q,Y){let J=Q.length,K=Y.length;if(K>J)return-1;for(let $=0;$<=J-K;$++){let W=!0;for(let Z=0;Z<K;Z++)if(Q[$+Z]!==Y[Z]){W=!1;break}if(W)return $}return-1}function mQ(Q){let Y=Q.reduce(($,W)=>$+W.length,0),J=new Uint8Array(Y),K=0;for(let $ of Q)J.set($,K),K+=$.length;return J}var QJ={utf8:new globalThis.TextDecoder("utf8")};var YJ=new globalThis.TextEncoder;var JJ=Array.from({length:256},(Q,Y)=>Y.toString(16).padStart(2,"0"));function z1(Q){let{byteLength:Y}=Q;if(Y===6)return Q.getUint16(0)*4294967296+Q.getUint32(2);if(Y===5)return Q.getUint8(0)*4294967296+Q.getUint32(1);if(Y===4)return Q.getUint32(0);if(Y===3)return Q.getUint8(0)*65536+Q.getUint16(1);if(Y===2)return Q.getUint16(0);if(Y===1)return Q.getUint8(0)}function pQ(Q,Y){let J=Q.length,K=Y.length;if(K===0)return-1;if(K>J)return-1;let $=J-K;for(let W=0;W<=$;W++){let Z=!0;for(let V=0;V<K;V++)if(Q[W+V]!==Y[V]){Z=!1;break}if(Z)return W}return-1}function F0(Q,Y){return pQ(Q,Y)!==-1}function R0(Q){return[...Q].map((Y)=>Y.charCodeAt(0))}function O0(Q,Y=0){let J=Number.parseInt(new B(6).get(Q,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(J))return!1;let K=256;for(let $=Y;$<Y+148;$++)K+=Q[$];for(let $=Y+156;$<Y+512;$++)K+=Q[$];return J===K}var B0={get:(Q,Y)=>Q[Y+3]&127|Q[Y+2]<<7|Q[Y+1]<<14|Q[Y]<<21,len:4};var E0=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm","ppsm","ppsx"],U0=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia"];var e=4100;async function yQ(Q){return new n().fromBuffer(Q)}async function uQ(Q){return new n().fromBlob(Q)}function v1(Q){switch(Q.toLowerCase()){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:"application/vnd.oasis.opendocument.text-template"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:"application/vnd.oasis.opendocument.spreadsheet-template"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:"application/vnd.oasis.opendocument.presentation-template"};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:"application/vnd.oasis.opendocument.graphics"};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:"application/vnd.oasis.opendocument.graphics-template"};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:"application/vnd.openxmlformats-officedocument.presentationml.slideshow"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.template"};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.template"};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:"application/vnd.openxmlformats-officedocument.presentationml.template"};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function g(Q,Y,J){J={offset:0,...J};for(let[K,$]of Y.entries())if(J.mask){if($!==(J.mask[K]&Q[K+J.offset]))return!1}else if($!==Q[K+J.offset])return!1;return!0}async function cQ(Q){return new n().fromTokenizer(Q)}class n{constructor(Q){this.detectors=[...Q?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:Q?.signal}}async fromTokenizer(Q){let Y=Q.position;for(let J of this.detectors){let K=await J.detect(Q);if(K)return K;if(Y!==Q.position)return}}async fromBuffer(Q){if(!(Q instanceof Uint8Array||Q instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof Q}\``);let Y=Q instanceof Uint8Array?Q:new Uint8Array(Q);if(!(Y?.length>1))return;return this.fromTokenizer(o1(Y,this.tokenizerOptions))}async fromBlob(Q){return this.fromStream(Q.stream())}async fromStream(Q){let Y=await W1(Q,this.tokenizerOptions);try{return await this.fromTokenizer(Y)}finally{await Y.close()}}async toDetectionStream(Q,Y){let{sampleSize:J=e}=Y,K,$,W=Q.getReader({mode:"byob"});try{let{value:j,done:F}=await W.read(new Uint8Array(J));if($=j,!F&&j)try{K=await this.fromBuffer(j.slice(0,J))}catch(q){if(!(q instanceof N))throw q;K=void 0}$=j}finally{W.releaseLock()}let Z=new TransformStream({async start(j){j.enqueue($)},transform(j,F){F.enqueue(j)}}),V=Q.pipeThrough(Z);return V.fileType=K,V}check(Q,Y){return g(this.buffer,Q,Y)}checkString(Q,Y){return this.check(R0(Q),Y)}detectConfident=async(Q)=>{if(this.buffer=new Uint8Array(e),Q.fileInfo.size===void 0)Q.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=Q,await Q.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await Q.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident(Q);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await Q.ignore(6);let Y=await Q.readToken(B0);if(Q.position+Y>Q.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await Q.ignore(Y),this.fromTokenizer(Q)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let Y;return await new g1(Q).unzip((J)=>{switch(J.filename){case"META-INF/mozilla.rsa":return Y={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return Y={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(K){let $=new TextDecoder("utf-8").decode(K).trim();Y=v1($)},stop:!0};case"[Content_Types].xml":return{async handler(K){let $=new TextDecoder("utf-8").decode(K),W=$.indexOf('.main+xml"');if(W===-1){if($.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))Y=v1("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{$=$.slice(0,Math.max(0,W));let Z=$.lastIndexOf('"'),V=$.slice(Math.max(0,Z+1));Y=v1(V)}},stop:!0};default:if(/classes\d*\.dex/.test(J.filename))return Y={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}),Y??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await Q.ignore(28);let Y=new Uint8Array(8);if(await Q.readBuffer(Y),g(Y,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(g(Y,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(g(Y,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(g(Y,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(g(Y,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(g(Y,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{if(await Q.ignore(1350)===1350){let K=new Uint8Array(Math.min(10485760,Q.fileInfo.size-1350));if(await Q.readBuffer(K,{mayBeLess:!0}),F0(K,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}}catch(Y){if(!(Y instanceof N))throw Y}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let Y=await this.readTiffHeader(!1);if(Y)return Y}if(this.check([77,77])){let Y=await this.readTiffHeader(!0);if(Y)return Y}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function Y(){let Z=await Q.peekNumber(f1),V=128,j=0;while((Z&V)===0&&V!==0)++j,V>>=1;let F=new Uint8Array(j+1);return await Q.readBuffer(F),F}async function J(){let Z=await Y(),V=await Y();V[0]^=128>>V.length-1;let j=Math.min(6,V.length),F=new DataView(Z.buffer),q=new DataView(V.buffer,V.length-j,j);return{id:z1(F),len:z1(q)}}async function K(Z){while(Z>0){let V=await J();if(V.id===17026)return(await Q.readToken(new B(V.len))).replaceAll(/\00.*$/g,"");await Q.ignore(V.len),--Z}}let $=await J();switch(await K($.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let Y=new B(4,"latin1").get(this.buffer,2);if(Y.match("^d*")&&Y>=1000&&Y<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await Q.ignore(8),await Q.readToken(new B(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((Y)=>this.checkString(Y,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await Q.ignore(8);async function Y(){return{length:await Q.readToken(s1),type:await Q.readToken(new B(4,"latin1"))}}do{let J=await Y();if(J.length<0)return;switch(J.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await Q.ignore(J.length+4)}}while(Q.position+8<Q.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let Y=new B(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(Y){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(Y.startsWith("3g")){if(Y.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function Y(){let J=new Uint8Array(16);return await Q.readBuffer(J),{id:J,size:Number(await Q.readToken(a1))}}await Q.ignore(30);while(Q.position+24<Q.fileInfo.size){let J=await Y(),K=J.size-24;if(g(J.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let $=new Uint8Array(16);if(K-=await Q.readBuffer($),g($,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(g($,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await Q.ignore(K)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await Q.ignore(20),await Q.readToken(new B(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.check([0,60,0,63,0,120,0,109,0,108],{offset:2}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await Q.peekBuffer(this.buffer,{length:Math.min(256,Q.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let Y=new DataView(this.buffer.buffer).getUint32(12,!0);if(Y>12&&this.buffer.length>=Y+16)try{let J=new TextDecoder().decode(this.buffer.slice(16,Y+16));if(JSON.parse(J).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await Q.peekBuffer(this.buffer,{length:Math.min(512,Q.fileInfo.size),mayBeLess:!0}),O0(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.check([60,0,63,0,120,0,109,0,108,0],{offset:2}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async(Q)=>{if(this.buffer=new Uint8Array(e),await Q.peekBuffer(this.buffer,{length:Math.min(8,Q.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]})){if(this.check([8],{offset:1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}};async readTiffTag(Q){let Y=await this.tokenizer.readToken(Q?o:H);switch(this.tokenizer.ignore(10),Y){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(Q){let Y=await this.tokenizer.readToken(Q?o:H);for(let J=0;J<Y;++J){let K=await this.readTiffTag(Q);if(K)return K}}async readTiffHeader(Q){let Y=(Q?o:H).get(this.buffer,2),J=(Q?i1:x).get(this.buffer,4);if(Y===42){if(J>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(J>=8){let $=(Q?o:H).get(this.buffer,8),W=(Q?o:H).get(this.buffer,10);if($===28&&W===254||$===31&&W===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(J),await this.readTiffIFD(Q)??{ext:"tif",mime:"image/tiff"}}if(Y===43)return{ext:"tif",mime:"image/tiff"}}}var bQ=new Set(E0),lQ=new Set(U0);class N1 extends n{async fromStream(Q){let Y=await(Q instanceof oQ?W1(Q,this.tokenizerOptions):d1(Q,this.tokenizerOptions));try{return await super.fromTokenizer(Y)}finally{await Y.close()}}async fromFile(Q){let Y=await n1(Q);try{return await super.fromTokenizer(Y)}finally{await Y.close()}}async toDetectionStream(Q,Y={}){if(!(Q instanceof nQ))return super.toDetectionStream(Q,Y);let{sampleSize:J=e}=Y;return new Promise((K,$)=>{Q.on("error",$),Q.once("readable",()=>{(async()=>{try{let W=new dQ,Z=L0?L0(Q,W,()=>{}):Q.pipe(W),V=Q.read(J)??Q.read()??new Uint8Array(0);try{W.fileType=await this.fromBuffer(V)}catch(j){if(j instanceof N)W.fileType=void 0;else $(j)}K(Z)}catch(W){$(W)}})()})})}}async function CJ(Q,Y){return new N1(Y).fromFile(Q,Y)}async function xJ(Q,Y){return new N1(Y).fromStream(Q)}async function PJ(Q,Y={}){return new N1(Y).toDetectionStream(Q,Y)}export{lQ as supportedMimeTypes,bQ as supportedExtensions,PJ as fileTypeStream,cQ as fileTypeFromTokenizer,xJ as fileTypeFromStream,CJ as fileTypeFromFile,yQ as fileTypeFromBuffer,uQ as fileTypeFromBlob,N1 as FileTypeParser};
